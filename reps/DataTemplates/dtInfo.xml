<?xml version="1.0" encoding="utf-8" ?>
<dataTemplate name="DATA">
	<parameters>
		<parameter name="p_nameObject" dataType="character"
			default="Кривбаспромводопостачання" />
	</parameters>
	<dataQuery>
		<sqlStatement name="q1">
			<![CDATA[
				select count(*) as countSubstations from lstSubstation where idSubstation > 0
			]]>
		</sqlStatement>
		<sqlStatement name="q2">
			<![CDATA[
				select count(*) as countAccounts from Accounts where idAccount > 0
			]]>
		</sqlStatement>
		<sqlStatement name="q3">
			<![CDATA[
				select case when state=0 then 'Не активні' when state=1 then 'Aктивні' end as stateMeter, count(*) as cMeters from Meters where idMeter > 0 group by state
			]]>
		</sqlStatement>
		<sqlStatement name="q4">
			<![CDATA[
				select T.capt as typeMeter, case when M.state=0 then 'Не активні' when M.state=1 then 'Aктивні' end as stateMeter, count(*) as countMeters 
				from Meters M, TypeMeters T where T.idTypeMeter = M.idType and M.idMeter > 0 group by T.capt, M.state
			]]>
		</sqlStatement>
	</dataQuery>
	<dataStructure>
		<group name="S" source="q1">
			<element name="countSubstations" value="countSubstations" />
		</group>
		<group name="A" source="q2">
			<element name="countAccounts" value="countAccounts" />
		</group>
		<group name="M" source="q3">
			<element name="stateMeter" value="stateMeter" />
			<element name="cMeters" value="cMeters" />
		</group>
		<group name="T" source="q4">
			<element name="typeMeter" value="typeMeter" />
			<element name="countMeters" value="countMeters" />
			<element name="stateMeter" value="stateMeter" />
		</group>
	</dataStructure>
</dataTemplate>